<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>
  <style>
    body { background: #1e1e2f; color: white; font-family: Arial; padding: 20px; }
    button, input { padding: 10px; margin: 5px; }
    .hidden { display: none; }
  </style>
</head>
<body>

<h1>Admin Panel</h1>
<div id="login">
  <input type="password" id="password" placeholder="Admin Password">
  <button onclick="login()">Login</button>
</div>

<div id="controls" class="hidden">
  <button onclick="sendAction('toggleMaintenance')">Toggle Maintenance</button>
  <button onclick="sendAction('forceRefresh')">Force Refresh</button>
  <input type="text" id="banPlayer" placeholder="Player to ban">
  <button onclick="suggestBan()">Suggest Ban</button>
</div>

<script>
const ADMIN_PASSWORD = "VerseKingAdmin123"; // Change this

function login() {
  if (document.getElementById("password").value === ADMIN_PASSWORD) {
    document.getElementById("login").classList.add("hidden");
    document.getElementById("controls").classList.remove("hidden");
    localStorage.setItem("admin", "true");
  } else {
    alert("Wrong password");
  }
}

if (localStorage.getItem("admin") === "true") {
  document.getElementById("login").classList.add("hidden");
  document.getElementById("controls").classList.remove("hidden");
}

async function sendAction(action, extra={}) {
  const payload = { action, admin: "Archit", ...extra };
  const res = await fetch(`https://api.github.com/repos/YourGitHubUsername/YourRepoName/dispatches`, {
    method: "POST",
    headers: {
      "Accept": "application/vnd.github+json",
      "Authorization": "Bearer YOUR_PERSONAL_ACCESS_TOKEN" // TEMP: REMOVE later
    },
    body: JSON.stringify({
      event_type: "update-logs",
      client_payload: payload
    })
  });
  if (res.ok) alert("Action sent!");
  else alert("Error sending action");
}

function suggestBan() {
  const player = document.getElementById("banPlayer").value.trim();
  if (player) sendAction("suggestBan", { player });
}
</script>

</body>
</html>
